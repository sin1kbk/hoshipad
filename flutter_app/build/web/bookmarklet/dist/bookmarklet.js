javascript:!function(){function t(t){let e=0;Math.max(t.naturalWidth,t.width||0)>500&&(e+=1e3),t.closest("header")&&(e-=500);const n=t.alt||"";return n.length>20&&(e+=100),(n.includes("profile")||n.includes("プロフィール"))&&(e-=500),e}function e(e){return Array.from(document.querySelectorAll(e)).map(e=>({img:e,score:t(e)})).sort((t,e)=>e.score-t.score)}const n=window.location.href;let r=document.title,o="",i=[];if("Instagram"===r){const t=function(){let t="Instagram",n="";const r=e("article img");if(r.length>0&&r[0].score>0)n=r[0].img.src;else{const t=e("img");if(t.length>0&&t[0].score>0)n=t[0].img.src;else{const t=document.querySelector('meta[property="og:image"]');t&&(n=t.getAttribute("content"))}}const o=document.querySelector('meta[property="og:title"]'),i=document.querySelector('meta[property="og:description"]');let c=!1;if(o){const e=o.getAttribute("content");if(e){const n=e.split("\n");for(let e=0;e<n.length;e++){const r=n[e].trim();if(r&&!r.startsWith("・")&&!r.startsWith("［")&&!r.startsWith("#")&&!r.match(/^ー+$/)&&r.length>3&&r.length<50&&!r.includes("@")&&!r.includes("Instagram")){t=r,c=!0;break}}}}if(!c&&i){const e=i.getAttribute("content");if(e){const n=e.split("\n").filter(t=>t.trim());for(let e=0;e<n.length;e++){const r=n[e].trim();if(r&&!r.match(/^\d/)&&!r.startsWith("・")&&!r.startsWith("［")&&!r.startsWith("#")&&!r.match(/^ー+$/)&&r.length>3&&r.length<50){t=r;break}}"Instagram"===t&&n.length>0&&(t=n[0].trim()||"Instagram Post")}}return{title:t,imageUrl:n}}();r=t.title,o=t.imageUrl}else if(n.includes("cookpad.com")){const t=function(){let t="";const e=document.querySelector('meta[property="og:image"]');return e&&(t=e.getAttribute("content")||""),{imageUrl:t,ingredients:function(){const t=Array.from(document.querySelectorAll("h2")).find(t=>"材料"===t.textContent.trim()),e=[];if(!t)return e;const n=t.parentElement;if(!n)return e;const r=n.nextElementSibling?.nextElementSibling;return r?(r.querySelectorAll("li").forEach(t=>{const n=t.querySelector("span"),r=t.querySelector("bdi");if(n&&r){const t=n.textContent.trim(),o=r.textContent.trim();t&&o&&e.push({name:t,quantity:o})}}),e):e}()}}();o=t.imageUrl,i=t.ingredients||[]}else{const t=function(){let t="";const e=document.querySelector('meta[property="og:image"]');return e&&(t=e.getAttribute("content")||""),{imageUrl:t}}();o=t.imageUrl}const c=new URLSearchParams({url:n,title:r});if(o&&c.append("image",o),i.length>0){const t=i.map(t=>`${t.name}:${t.quantity}`).join("\n");c.append("ingredients",t)}window.location.href=`http://localhost:8080/add?${c.toString()}`}();